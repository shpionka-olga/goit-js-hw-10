{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport iziToast from \"izitoast\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nlet chosenDate = null;\nconst iziToastOptions = {\n    title: 'Error',\n    theme: 'dark',\n    backgroundColor: '#ef4040',\n    titleColor: '#ffffff',\n    messageColor: '#ffffff',\n    iconColor: '#ffffff',\n    titleLineHeight: '1.5',\n    titleSize: '16px',\n    messageLineHeight: '1.5',\n    messageSize: '16px',\n    iconUrl: './img/error-img.svg',\n    message: 'Please choose a date in the future',\n};\n\nconst optionsFlatpickr = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    locale: {\n        firstDayOfWeek: 1,// start week on Monday\n        weekdays: {\n            shorthand: ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'],\n            longhand: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],\n        }\n    },\n    //minDate: \"today\", //не дає вибрати минулу дату\n    onClose(selectedDates) {\n        const buttonStart = document.querySelector('button[data-start]');\n        if (selectedDates[0] < Date.now()) {\n            iziToast.error(iziToastOptions);\n            chosenDate = null;\n            if (buttonStart.getAttribute('disabled') == null) {\n                buttonStart.setAttribute('disabled', '');\n                buttonStart.className = 'is-disabled';\n            }\n        } else {\n            chosenDate = selectedDates[0];\n            console.log(selectedDates[0]);\n            buttonStart.removeAttribute('disabled');\n            buttonStart.removeAttribute('class');\n        }\n    },\n};\n\n\nconst dateTimePicker = document.getElementById(\"datetime-picker\");\nconsole.log(dateTimePicker);\nflatpickr(dateTimePicker, optionsFlatpickr);\n\nconst buttonStart = document.querySelector('button[data-start]');\n\n\nfunction onStartTimer(event) {\n    if (chosenDate != null) {\n        //disabled button \n        event.target.setAttribute('disabled', '');\n        event.target.className = 'is-disabled';\n\n        //disabled input\n        dateTimePicker.setAttribute('disabled', '');\n        dateTimePicker.className = 'is-disabled';\n\n        //start timer\n        let diffTime = 0;\n        let diffTimeObject = null;\n        let diffTimeObjectString = null;\n\n        const daysSpan = document.querySelector('.value[data-days]');\n        const hoursSpan = document.querySelector('.value[data-hours]');\n        const minutesSpan = document.querySelector('.value[data-minutes]');\n        const secondsSpan = document.querySelector('.value[data-seconds]');\n\n        const timerInterval = setInterval(function () {\n            diffTime = chosenDate.getTime() - Date.now();\n            if (diffTime <= 0) {\n                stopTimer(timerInterval, event.target, dateTimePicker);\n            } else {\n                diffTimeObject = convertMs(diffTime);\n                diffTimeObjectString = addLeadingZero(diffTimeObject);\n                daysSpan.textContent = diffTimeObjectString.days;\n                hoursSpan.textContent = diffTimeObjectString.hours;\n                minutesSpan.textContent = diffTimeObjectString.minutes;\n                secondsSpan.textContent = diffTimeObjectString.seconds;\n            }\n\n        }, 1000)\n\n    }\n\n}\n\nbuttonStart.addEventListener('click', onStartTimer);\n\nfunction stopTimer(timerInterval, buttonEl, inputEl) {\n    console.log(\"Timer ended\");\n    clearInterval(timerInterval);\n\n    buttonEl.removeAttribute('disabled');\n    buttonEl.removeAttribute('class');\n\n    inputEl.removeAttribute('disabled');\n    inputEl.removeAttribute('class');\n}\n\nfunction addLeadingZero(value) {\n    const days = value.days.toString().padStart(2, '0');\n    const hours = value.hours.toString().padStart(2, '0');\n    const minutes = value.minutes.toString().padStart(2, '0');\n    const seconds = value.seconds.toString().padStart(2, '0');\n    return { days, hours, minutes, seconds };\n}\n\nfunction convertMs(ms) {\n    // Number of milliseconds per unit of time\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n\n    // Remaining days\n    const days = Math.floor(ms / day);\n    // Remaining hours\n    const hours = Math.floor((ms % day) / hour);\n    // Remaining minutes\n    const minutes = Math.floor(((ms % day) % hour) / minute);\n    // Remaining seconds\n    const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n    return { days, hours, minutes, seconds };\n}"],"names":["chosenDate","iziToastOptions","optionsFlatpickr","selectedDates","buttonStart","iziToast","dateTimePicker","flatpickr","onStartTimer","event","diffTime","diffTimeObject","diffTimeObjectString","daysSpan","hoursSpan","minutesSpan","secondsSpan","timerInterval","stopTimer","convertMs","addLeadingZero","buttonEl","inputEl","value","days","hours","minutes","seconds","ms"],"mappings":"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"}